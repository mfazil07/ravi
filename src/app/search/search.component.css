$(document).ready(function () {
    var $country = $('#@idDDCountry');
    var $state = $('#@idDDState');

    // Only refresh â€” don't reset .val() if selected is already rendered by Razor
    if ($country.data('multiselect')) $country.multiselect('refresh');
    if ($state.data('multiselect')) $state.multiselect('refresh');

    // Visibility check and AJAX call
    var selectedCountries = $country.val() || [];
    var selectedStates = $state.val() || [];

    if (selectedCountries.includes("USA") && selectedStates.length > 0) {
        $state.closest(".form-group").show();
        triggerWeatherEventsCheck(); // your ajax call
    } else {
        $state.closest(".form-group").hide();
    }

    // Run visibility logic as needed here
});
