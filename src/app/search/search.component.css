<div class="col-md-4">
    <label title="Filter weather events by the Country" for="@idDDCountry">Weather Alert Countries</label>
    <span class="text-danger">*</span>
    <div class="form-group">
        <select id="@idDDCountry" name="Country" multiple="multiple" class="form-control mb-2 qtc-weather-alert-multi-select">
            @foreach (var item in Model.CountryList)
            {
                <option value="@item.Key"
@if (Model.Country != null && Model.Country.Contains(item.Key)) { <text> selected="selected"</text>; }>
                    @item.Value
                </option>
            }
        </select>
        <div class="validationError divInvalidCountry text-danger" style="display:none">
            <span class="field-validation-error" data-valmsg-for="Country" data-valmsg-replace="true">
                Please select at least one country.
            </span>
        </div>
    </div>
</div>


///



<script>
    $(document).ready(function() {
        // Initialize Bootstrap Multiselect
        $('#@idDDCountry').multiselect({
            buttonClass: 'btn btn-default',
            includeSelectAllOption: true,
            enableFiltering: true
        });

        // Validation on form submit
        $('form').on('submit', function(e) {
            var selectedCountries = $('#@idDDCountry').val();
            if (!selectedCountries || selectedCountries.length === 0) {
                $('.divInvalidCountry').show();
                e.preventDefault();
            } else {
                $('.divInvalidCountry').hide();
            }
        });

        // Hide error on change
        $('#@idDDCountry').on('change', function() {
            var selectedCountries = $(this).val();
            if (selectedCountries && selectedCountries.length > 0) {
                $('.divInvalidCountry').hide();
            }
        });
    });
</script>
